<!DOCTYPE html>
<html>
  <head>
    <title>Clinical Trials</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      .axis path,
      .axis line {
        display: none;
      }

      .legend {
        font-size: 12px;
      }

      .legend-container {
        padding: 10px;
      }

      #stream_graph {
        width: 80%; /* Adjust the width */
        height: 90vh; /* Adjust the height */
        float: left; /* This will ensure the legend is beside the graph */
      }

      #bubble_chart {
        width: 100%; /* Adjust the width */
        height: 100vh; /* Adjust the height */
      }

      .waffle-block {
        width: 10px;
        height: 10px;
        background-color: #999;
        margin: 1px;
      }

      .chart-container {
        display: flex;
        flex-wrap: wrap;
      }

      #connected_dot_plot {
        width: 100%;
        height: 200px;
        margin-top: 20px;
        margin-bottom: 20px;
      }

      .dot {
        fill: #d69c8c;
        opacity: 0.8;
      }

      .line {
        stroke: grey;
        stroke-width: 3;
        opacity: 0.5;
      }

      .label {
        fill: black;
        font-size: 12px;
      }

      .tooltip {
        position: absolute;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        padding: 8px;
        opacity: 0;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <div class="chart-container">
      <div id="stream_graph"></div>
      <div class="legend-container"></div>
    </div>

    <div class="chart-container">
      <div id="bubble_chart"></div>
    </div>

    <div class="chart-container">
      <div id="waffle-chart"></div>
    </div>

    <div
      class="tableauPlaceholder"
      id="viz1689095843605"
      style="position: relative"
    >
      <noscript>
        <a href="#">
          <img
            alt="Dashboard 3"
            src="https://public.tableau.com/static/images/ma/mapwithphaseandstatus/Dashboard3/1_rss.png"
            style="border: none"
          />
        </a>
      </noscript>
      <object class="tableauViz" style="display: none">
        <param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F" />
        <param name="embed_code_version" value="3" />
        <param name="site_root" value="" />
        <param name="name" value="mapwithphaseandstatus/Dashboard3" />
        <param name="tabs" value="no" />
        <param name="toolbar" value="yes" />
        <param
          name="static_image"
          value="https://public.tableau.com/static/images/ma/mapwithphaseandstatus/Dashboard3/1.png"
        />
        <param name="animate_transition" value="yes" />
        <param name="display_static_image" value="yes" />
        <param name="display_spinner" value="yes" />
        <param name="display_overlay" value="yes" />
        <param name="display_count" value="yes" />
        <param name="language" value="en-GB" />
        <param name="filter" value="publish=yes" />
      </object>
    </div>
    <script type="text/javascript">
      var divElement = document.getElementById("viz1689095843605");
      var vizElement = divElement.getElementsByTagName("object")[0];
      if (divElement.offsetWidth > 800) {
        vizElement.style.width = "1200px";
        vizElement.style.height = "827px";
      } else if (divElement.offsetWidth > 500) {
        vizElement.style.width = "1200px";
        vizElement.style.height = "827px";
      } else {
        vizElement.style.width = "100%";
        vizElement.style.height = "727px";
      }
      var scriptElement = document.createElement("script");
      scriptElement.src =
        "https://public.tableau.com/javascripts/api/viz_v1.js";
      vizElement.parentNode.insertBefore(scriptElement, vizElement);
    </script>

    <div class="chart-container">
      <div id="connected_dot_plot"></div>
    </div>

    <script>
      //////////////////////////////////////////////////////////////

      /////////////////////// STREAM CHART /////////////////////////

      //////////////////////////////////////////////////////////////

      // Set the data and other variables
      var data = [
        {
          year: 2009,
          "American Indian/ Alaska Native": 0,
          "Asian/ Asian Heritage": 132,
          "Black/ Black Heritage": 0,
          "Hawaiian/ Other Pacific Islander": 0,
          "Hispanic/ Latino": 0,
          "Middle Eastern": 0,
          Mixed: 0,
          Other: 0,
          "Unknown or Not Reported": 0,
          "White/ White Heritage": 0,
        },
        {
          year: 2011,
          "American Indian/ Alaska Native": 4,
          "Asian/ Asian Heritage": 162,
          "Black/ Black Heritage": 114,
          "Hawaiian/ Other Pacific Islander": 4,
          "Hispanic/ Latino": 126,
          "Middle Eastern": 0,
          Mixed: 8,
          Other: 2710,
          "Unknown or Not Reported": 28,
          "White/ White Heritage": 2582,
        },
        {
          year: 2012,
          "American Indian/ Alaska Native": 8,
          "Asian/ Asian Heritage": 473,
          "Black/ Black Heritage": 277,
          "Hawaiian/ Other Pacific Islander": 14,
          "Hispanic/ Latino": 224,
          "Middle Eastern": 0,
          Mixed: 4,
          Other: 4423,
          "Unknown or Not Reported": 1954,
          "White/ White Heritage": 6950,
        },
        {
          year: 2013,
          "American Indian/ Alaska Native": 21,
          "Asian/ Asian Heritage": 2068,
          "Black/ Black Heritage": 438,
          "Hawaiian/ Other Pacific Islander": 18,
          "Hispanic/ Latino": 164,
          "Middle Eastern": 0,
          Mixed: 8,
          Other: 5624,
          "Unknown or Not Reported": 1647,
          "White/ White Heritage": 7438,
        },
        {
          year: 2014,
          "American Indian/ Alaska Native": 57,
          "Asian/ Asian Heritage": 2008,
          "Black/ Black Heritage": 615,
          "Hawaiian/ Other Pacific Islander": 26,
          "Hispanic/ Latino": 855,
          "Middle Eastern": 0,
          Mixed: 202,
          Other: 16235,
          "Unknown or Not Reported": 4159,
          "White/ White Heritage": 17292,
        },
        {
          year: 2015,
          "American Indian/ Alaska Native": 179,
          "Asian/ Asian Heritage": 7488,
          "Black/ Black Heritage": 1071,
          "Hawaiian/ Other Pacific Islander": 45,
          "Hispanic/ Latino": 2595,
          "Middle Eastern": 4,
          Mixed: 224,
          Other: 31680,
          "Unknown or Not Reported": 6299,
          "White/ White Heritage": 29705,
        },
        {
          year: 2016,
          "American Indian/ Alaska Native": 180,
          "Asian/ Asian Heritage": 9092,
          "Black/ Black Heritage": 1185,
          "Hawaiian/ Other Pacific Islander": 43,
          "Hispanic/ Latino": 2232,
          "Middle Eastern": 0,
          Mixed: 84,
          Other: 29533,
          "Unknown or Not Reported": 9585,
          "White/ White Heritage": 36350,
        },
        {
          year: 2017,
          "American Indian/ Alaska Native": 236,
          "Asian/ Asian Heritage": 9651,
          "Black/ Black Heritage": 995,
          "Hawaiian/ Other Pacific Islander": 34,
          "Hispanic/ Latino": 2761,
          "Middle Eastern": 0,
          Mixed: 104,
          Other: 32718,
          "Unknown or Not Reported": 7911,
          "White/ White Heritage": 31089,
        },
        {
          year: 2018,
          "American Indian/ Alaska Native": 44,
          "Asian/ Asian Heritage": 2287,
          "Black/ Black Heritage": 346,
          "Hawaiian/ Other Pacific Islander": 12,
          "Hispanic/ Latino": 1894,
          "Middle Eastern": 2,
          Mixed: 80,
          Other: 12877,
          "Unknown or Not Reported": 4138,
          "White/ White Heritage": 11062,
        },
        {
          year: 2019,
          "American Indian/ Alaska Native": 38,
          "Asian/ Asian Heritage": 1766,
          "Black/ Black Heritage": 146,
          "Hawaiian/ Other Pacific Islander": 7,
          "Hispanic/ Latino": 460,
          "Middle Eastern": 0,
          Mixed: 24,
          Other: 4048,
          "Unknown or Not Reported": 290,
          "White/ White Heritage": 3879,
        },
        {
          year: 2020,
          "American Indian/ Alaska Native": 1,
          "Asian/ Asian Heritage": 35,
          "Black/ Black Heritage": 17,
          "Hawaiian/ Other Pacific Islander": 0,
          "Hispanic/ Latino": 68,
          "Middle Eastern": 0,
          Mixed: 6,
          Other: 1616,
          "Unknown or Not Reported": 287,
          "White/ White Heritage": 1712,
        },
        {
          year: 2021,
          "American Indian/ Alaska Native": 0,
          "Asian/ Asian Heritage": 44,
          "Black/ Black Heritage": 7,
          "Hawaiian/ Other Pacific Islander": 0,
          "Hispanic/ Latino": 22,
          "Middle Eastern": 0,
          Mixed: 2,
          Other: 165,
          "Unknown or Not Reported": 70,
          "White/ White Heritage": 124,
        },
        {
          year: 2022,
          "American Indian/ Alaska Native": 0,
          "Asian/ Asian Heritage": 0,
          "Black/ Black Heritage": 0,
          "Hawaiian/ Other Pacific Islander": 0,
          "Hispanic/ Latino": 0,
          "Middle Eastern": 0,
          Mixed: 0,
          Other: 0,
          "Unknown or Not Reported": 0,
          "White/ White Heritage": 3,
        },
      ];

      // Select the div container
      var container = d3.select("#stream_graph");

      // Get the width and height of the container
      var containerWidth = parseInt(container.style("width")),
        containerHeight = parseInt(container.style("height"));

      var margin = { top: 100, right: 20, bottom: 50, left: 40 },
        width = containerWidth - margin.left - margin.right,
        height = containerHeight - margin.top - margin.bottom;

      // Append the SVG object to the body of the page
      var svg = container
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      svg
        .append("text")
        .attr("x", width / 2)
        .attr("y", 0 - margin.top / 2)
        .attr("text-anchor", "middle")
        .style("font-size", "35px")
        .text("Evolution of ethnic groups in clinical trials over time");

      // Set the stack offset
      var stackOffset = d3.stackOffsetSilhouette;

      // Add X axis
      var x = d3.scaleLinear().range([0, width]);
      x.domain(
        d3.extent(data, function (d) {
          return parseInt(d.year);
        })
      );
      svg
        .append("g")
        .attr("transform", "translate(0," + height * 1 + ")")
        .call(
          d3
            .axisBottom(x)
            .tickSize(-height * 1)
            .tickFormat(d3.format("d"))
        )
        .selectAll(".domain")
        .remove();
      svg.selectAll(".tick line").attr("stroke", "#b8b8b8");

      // Append X axis label
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.top + 10)
        .text("Year");

      // Add Y axis
      var y = d3.scaleLinear().range([height, 0]);

      // Add Y axis
      var y = d3.scaleLinear().range([height, 0]);
      y.domain([
        d3.min(data, function (d) {
          return d3.min(Object.values(d).slice(1));
        }),
        d3.max(data, function (d) {
          return d3.max(Object.values(d).slice(1));
        }),
      ]);

      // Update the y domain based on your desired range
      y.domain([0, 150000]);

      // Define the updated color palette and order
      var race_colors = [
        "#EE6A50",
        "#fde624",
        "#3b518b",
        "#5cc862",
        "orange",
        "black",
        "green",
        "#21908c",
        "#430154",
        "skyblue",
      ];
      var race_order = [
        "Unknown or Not Reported",
        "White/ White Heritage",
        "Black/ Black Heritage",
        "Asian/ Asian Heritage",
        "American Indian/ Alaska Native",
        "Hawaiian/ Other Pacific Islander",
        "Mixed",
        "Hispanic/ Latino",
        "Middle Eastern",
        "Other",
      ];
      var color = d3.scaleOrdinal().domain(race_order).range(race_colors);

      // Reorder the data based on the race order
      var reorderedData = data.map(function (d) {
        var reordered = { year: d.year };
        race_order.forEach(function (race) {
          reordered[race] = d[race];
        });
        return reordered;
      });

      // Stack the data
      var keys = Object.keys(reorderedData[0]).slice(1);
      var stackedData = d3.stack().keys(keys).offset(stackOffset)(
        reorderedData
      );

      // Create a tooltip
      var tooltip = svg
        .append("text")
        .attr("x", 0)
        .attr("y", 0)
        .style("opacity", 0)
        .style("font-size", 17);

      var area = d3
        .area()
        .x(function (d) {
          return x(d.data.year);
        })
        .y0(function (d) {
          return y(d[0]) - height * 0.5; // Moving the chart up by 50% of the height
        })
        .y1(function (d) {
          return y(d[1]) - height * 0.5; // Moving the chart up by 50% of the height
        });

      // Show the areas
      var areas = svg
        .selectAll("mylayers")
        .data(stackedData)
        .enter()
        .append("path")
        .attr("class", "myArea") // Note: this is the class you may want to style
        .style("fill", function (d) {
          return color(d.key);
        })
        .attr("d", area);

      // Add vertical line that follows the cursor
      var verticalLine = svg
        .append("line")
        .attr("opacity", 0)
        .attr("y1", 0)
        .attr("y2", height)
        .attr("stroke", "black")
        .attr("stroke-width", 1)
        .attr("pointer-events", "none");

      // Append a transparent rectangle for catching hover events across the whole graph
      svg
        .append("rect")
        .attr("width", width)
        .attr("height", height)
        .attr("fill", "transparent");

      // Attach mouse events to the transparent rectangle
      svg
        .select("rect")
        .on("mousemove", function (event) {
          // Find nearest data point to mouse position
          var xPos = d3.pointer(event)[0];
          var year = Math.round(x.invert(xPos));
          var yearData = data.find((d) => d.year === year);

          if (yearData) {
            var displayData = Object.entries(yearData).filter(
              ([key]) => key !== "year"
            );

            // Display data on the right side
            d3.select(".legend-container").html(() => {
              return (
                `Year: ${year}<br>` +
                displayData
                  .map(([key, value]) => `${key}: ${value}`)
                  .join("<br>")
              );
            });

            // Move vertical line
            verticalLine
              .attr("x1", x(year))
              .attr("x2", x(year))
              .attr("opacity", 1);
          }
        })
        .on("mouseleave", function () {
          verticalLine.attr("opacity", 0);
          d3.select(".legend-container").html("");
        });

      //////////////////////////////////////////////////////////////

      /////////////////////// BUBBLE CHART /////////////////////////

      //////////////////////////////////////////////////////////////

      // Set the data for the bubble chart
      var bubbleData = [
        { ethnicGroup: "Unknown or Not Reported", count: 36368 },
        { ethnicGroup: "White/ White Heritage", count: 141629 },
        { ethnicGroup: "Black/ Black Heritage", count: 5211 },
        { ethnicGroup: "Asian/ Asian Heritage", count: 35206 },
        { ethnicGroup: "American Indian/ Alaska Native", count: 768 },
        { ethnicGroup: "Hawaiian/ Other Pacific Islander", count: 203 },
        { ethnicGroup: "Mixed", count: 746 },
        { ethnicGroup: "Hispanic/ Latino", count: 11401 },
        { ethnicGroup: "Middle Eastern", count: 6 },
        { ethnicGroup: "Other", count: 35206 },
        // { ethnicGroup: "No Results", count: 413295949},
      ];

      // Adjust the width and margins of the bubble chart
      var bubbleMargin = { top: 20, right: 20, bottom: 20, left: 20 };
      var bubbleWidth =
        window.innerWidth - bubbleMargin.left - bubbleMargin.right + 20;
      var bubbleHeight =
        containerHeight - bubbleMargin.top - bubbleMargin.bottom;

      // Append the SVG object for the bubble chart
      var bubbleSvg = container
        .append("svg")
        .attr("width", bubbleWidth + bubbleMargin.left + bubbleMargin.right)
        .attr("height", bubbleHeight + bubbleMargin.top + bubbleMargin.bottom)
        .append("g")
        .attr(
          "transform",
          "translate(" + bubbleMargin.left + "," + bubbleMargin.top + ")"
        );

      // Create a scale for the bubble radius
      var maxCount = d3.max(bubbleData, function (d) {
        return d.count;
      });
      var radiusScale = d3
        .scaleSqrt()
        .domain([0, maxCount])
        .range([0, bubbleWidth / 10]); // Adjust the range as needed

      // Define the updated color palette and order
      var race_colors = [
        "#EE6A50",
        "#fde624",
        "#3b518b",
        "#5cc862",
        "orange",
        "black",
        "green",
        "#21908c",
        "#430154",
        "skyblue",
      ];

      // Append the title
      bubbleSvg
        .append("text")
        .attr("class", "chart-title")
        .attr("x", bubbleWidth / 2)
        .attr("y", 40)
        .attr("text-anchor", "middle")
        .style("font-size", "35px")
        .text("Total number of participants by ethnic group");

      // Create the bubble chart using the data
      var bubbles = bubbleSvg
        .selectAll(".bubble")
        .data(bubbleData)
        .enter()
        .append("g")
        .attr("class", "bubble")
        .attr("transform", function (d, i) {
          var spacing = bubbleWidth / (bubbleData.length + 1); // Increase the denominator to adjust spacing
          var x = (i + 1) * spacing; // Add 1 to i for positioning
          var y = bubbleHeight / 2;
          return "translate(" + x + "," + y + ")";
        });

      // Append the circles for bubbles
      bubbles
        .append("circle")
        .attr("r", function (d) {
          return radiusScale(d.count);
        })
        .style("fill", function (d, i) {
          return race_colors[i];
        })
        .style("opacity", 0.8);

      // Append the lines for labels
      bubbles
        .append("line")
        .attr("class", "label-line")
        .attr("x1", 0)
        .attr("y1", function (d, i) {
          return i % 2 === 0 ? -2 : 2;
        })
        .attr("x2", 0)
        .attr("y2", function (d, i) {
          return i % 2 === 0 ? -150 : 150;
        })
        .style("stroke", "black")
        .style("stroke-width", 1.5)
        .style("opacity", 0.3);

      // Append the text labels
      bubbles
        .append("text")
        .attr("class", "label")
        .attr("x", 0)
        .attr("y", function (d, i) {
          return i % 2 === 0 ? -155 : 165;
        })
        .text(function (d) {
          return d.ethnicGroup + ": " + d.count;
        })
        .style("fill", "black")
        .style("font-size", "16px")
        .style("text-anchor", "middle");

      //////////////////////////////////////////////////////////////

      /////////////////////// WAFFLE CHART /////////////////////////

      //////////////////////////////////////////////////////////////

      //////////////////////////////////////////////////////////////

      /////////////////////// CHOROPLETH CHART /////////////////////

      //////////////////////////////////////////////////////////////

      // code is in the head

      //////////////////////////////////////////////////////////////

      //////////////////// CONNECTED DOT CHART /////////////////////

      // Define the data for the dot plot
      var myelomaData = [
        { race: "myeloma", black_trials: 0.049342, black_cancer: 2.8 },
        { race: "prostate", black_trials: 0.051435, black_cancer: 2.1 },
      ];

      // Set the dimensions and margins for the dot plot
      var dotPlotWidth = window.innerWidth - 20; // Adjust the width to take the full screen width
      var dotPlotHeight = 400;
      var dotPlotMargin = { top: 50, right: 20, bottom: 20, left: 150 }; // Increase left margin for y-axis labels

      // Create the SVG container for the dot plot
      var dotPlotSvg = d3
        .select("#connected_dot_plot")
        .append("svg")
        .attr("width", dotPlotWidth)
        .attr("height", dotPlotHeight);

      // Define the tooltip element
      var tooltip = d3
        .select("#connected_dot_plot")
        .append("div")
        .attr("class", "tooltip")
        .style("opacity", 0);

      // Define the scales for x and y axes
      var xScale = d3
        .scaleLinear()
        .domain([0, 3])
        .range([0, dotPlotWidth - dotPlotMargin.left - dotPlotMargin.right]);
      var yScale = d3
        .scaleBand()
        .domain(
          myelomaData.map(function (d) {
            return d.race;
          })
        )
        .range([0, dotPlotHeight - dotPlotMargin.top - dotPlotMargin.bottom])
        .padding(0.1);

      // Append the dots for "black_trials" values
      dotPlotSvg
        .selectAll(".dot-trials")
        .data(myelomaData)
        .enter()
        .append("circle")
        .attr("class", "dot dot-trials")
        .attr("cx", function (d) {
          return xScale(d.black_trials) + dotPlotMargin.left;
        })
        .attr("cy", function (d) {
          return yScale(d.race) + yScale.bandwidth() / 2 + dotPlotMargin.top;
        })
        .attr("r", 12) // Adjust the dot size here
        .style("fill", "#d69c8c")
        .style("opacity", 0.8)
        .on("mouseover", function (event, d) {
          // Show the tooltip and update its content
          tooltip.transition().duration(200).style("opacity", 0.9);
          tooltip
            .html("Black Trials: " + d.black_trials)
            .style("left", event.pageX + "px")
            .style("top", event.pageY - 28 + "px");
        })
        .on("mouseout", function (d) {
          // Hide the tooltip
          tooltip.transition().duration(200).style("opacity", 0);
        });

      // Append the dots for "black_cancer" values
      dotPlotSvg
        .selectAll(".dot-cancer")
        .data(myelomaData)
        .enter()
        .append("circle")
        .attr("class", "dot dot-cancer")
        .attr("cx", function (d) {
          return xScale(d.black_cancer) + dotPlotMargin.left;
        })
        .attr("cy", function (d) {
          return yScale(d.race) + yScale.bandwidth() / 2 + dotPlotMargin.top;
        })
        .attr("r", 12) // Adjust the dot size here
        .style("fill", "#55a4a6")
        .style("opacity", 0.8)
        .on("mouseover", function (event, d) {
          // Show the tooltip and update its content
          tooltip.transition().duration(200).style("opacity", 0.9);
          tooltip
            .html("Black Cancer: " + d.black_cancer)
            .style("left", event.pageX + "px")
            .style("top", event.pageY - 28 + "px");
        })
        .on("mouseout", function (d) {
          // Hide the tooltip
          tooltip.transition().duration(200).style("opacity", 0);
        });

      // Connect the dots with grey lines
      dotPlotSvg
        .selectAll(".line")
        .data(myelomaData)
        .enter()
        .append("line")
        .attr("class", "line")
        .attr("x1", function (d) {
          return xScale(d.black_trials) + dotPlotMargin.left;
        })
        .attr("y1", function (d) {
          return yScale(d.race) + yScale.bandwidth() / 2 + dotPlotMargin.top;
        })
        .attr("x2", function (d) {
          return xScale(d.black_cancer) + dotPlotMargin.left;
        })
        .attr("y2", function (d) {
          return yScale(d.race) + yScale.bandwidth() / 2 + dotPlotMargin.top;
        })
        .style("stroke", "grey")
        .style("opacity", 0.5)
        .style("stroke-width", 2);

      // Add x-axis
      dotPlotSvg
        .append("g")
        .attr(
          "transform",
          "translate(" +
            dotPlotMargin.left +
            "," +
            (dotPlotHeight - dotPlotMargin.bottom) +
            ")"
        )
        .call(d3.axisBottom(xScale));

      // Add y-axis
      dotPlotSvg
        .append("g")
        .attr(
          "transform",
          "translate(" + dotPlotMargin.left + "," + dotPlotMargin.top + ")"
        )
        .call(d3.axisLeft(yScale))
        .selectAll("text")
        .style("font-size", "17px"); // Increase y-axis label font size

      // Add axis labels
      dotPlotSvg
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", dotPlotMargin.left - 60) // Adjust the y position of y-axis label
        .attr("x", 0 - dotPlotHeight / 2)
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .style("font-size", "16px"); // Increase y-axis label font size

      dotPlotSvg
        .append("text")
        .attr("y", dotPlotHeight - dotPlotMargin.bottom)
        .attr(
          "x",
          dotPlotMargin.left +
            (dotPlotWidth - dotPlotMargin.left - dotPlotMargin.right) / 2
        )
        .attr("dy", "2.5em")
        .style("text-anchor", "middle")
        .text("Ratio")
        .style("font-size", "16px"); // Increase x-axis label font size

      // Add title
      dotPlotSvg
        .append("text")
        .attr(
          "x",
          dotPlotMargin.left +
            (dotPlotWidth - dotPlotMargin.left - dotPlotMargin.right) / 2
        )
        .attr("y", dotPlotMargin.top - 20) // Adjust the y position of the title
        .style("text-anchor", "middle")
        .style("font-size", "35px") // Increase title font size
        .text("Connected Dot Plot: Black/Black Heritage diagnoses");

      // Add title (line 2)
      dotPlotSvg
        .append("text")
        .attr(
          "x",
          dotPlotMargin.left +
            (dotPlotWidth - dotPlotMargin.left - dotPlotMargin.right) / 2
        )
        .attr("y", dotPlotMargin.top + 25) // Adjust the y position of the title
        .style("text-anchor", "middle")
        .style("font-size", "35px") // Increase title font size
        .text("Vs trial representation to White");
      // Add legend
      dotPlotSvg
        .append("circle")
        .attr("cx", dotPlotWidth - dotPlotMargin.right - 100)
        .attr("cy", dotPlotMargin.top + 10)
        .attr("r", 12) // Adjust the dot size here
        .style("fill", "#d69c8c")
        .style("opacity", 0.8);

      dotPlotSvg
        .append("text")
        .attr("x", dotPlotWidth - dotPlotMargin.right - 80)
        .attr("y", dotPlotMargin.top + 15)
        .text("Black Trials")
        .style("font-size", "16px")
        .attr("alignment-baseline", "middle");

      dotPlotSvg
        .append("circle")
        .attr("cx", dotPlotWidth - dotPlotMargin.right - 100)
        .attr("cy", dotPlotMargin.top + 40) // Adjust the y-coordinate for spacing
        .attr("r", 12) // Adjust the dot size here
        .style("fill", "#55a4a6")
        .style("opacity", 0.8);

      dotPlotSvg
        .append("text")
        .attr("x", dotPlotWidth - dotPlotMargin.right - 80)
        .attr("y", dotPlotMargin.top + 45) // Adjust the y-coordinate for spacing
        .text("Black Cancer")
        .style("font-size", "16px")
        .attr("alignment-baseline", "middle");
    </script>
  </body>
</html>
